import React, { useState } from 'react';
import { Users, TrendingUp, BookOpen, Baby, Activity, AlertCircle, ArrowUpRight, PieChart, Briefcase, Globe, Landmark, Newspaper, BarChart3, LineChart } from 'lucide-react';

const Card = ({ children, className = "" }) => (
  <div className={`bg-white border-2 border-neutral-900 shadow-[4px_4px_0px_#000] ${className}`}>
    {children}
  </div>
);

const StatCard = ({ title, value, subtext, icon: Icon, trend }) => (
  <Card className="p-4 flex flex-col justify-between h-full relative overflow-hidden">
    <div className="flex justify-between items-start mb-2">
      <div className="bg-neutral-900 text-[#FFF0E6] p-1.5">
        <Icon size={20} />
      </div>
      {trend && (
        <span className="flex items-center text-xs font-bold text-green-700">
          <TrendingUp size={12} className="mr-1" /> {trend}
        </span>
      )}
    </div>
    <div className="relative z-10 mt-2">
      <p className="text-[10px] font-bold text-neutral-500 uppercase tracking-widest mb-1 border-b border-neutral-200 pb-1">{title}</p>
      <h3 className="text-3xl font-serif font-black text-neutral-900 tracking-tight">{value}</h3>
      {subtext && <p className="text-xs text-neutral-600 font-medium mt-1 font-serif">{subtext}</p>}
    </div>
  </Card>
);

const ComparisonBar = ({ label1, val1, label2, val2, title }) => (
  <div className="my-6 border-t border-b border-neutral-200 py-4">
    <h4 className="text-xs font-sans font-black text-neutral-900 mb-3 uppercase tracking-widest">{title}</h4>
    
    <div className="grid grid-cols-12 gap-2 items-center mb-2">
      <div className="col-span-3 text-[10px] font-bold text-neutral-600 uppercase text-right leading-tight">{label1}</div>
      <div className="col-span-9 flex items-center">
        <div className="h-4 bg-neutral-400 relative border border-neutral-900" style={{ width: `${val1}%` }}></div>
        <span className="ml-2 text-xs font-mono font-bold text-neutral-900">{val1}%</span>
      </div>
    </div>

    <div className="grid grid-cols-12 gap-2 items-center">
      <div className="col-span-3 text-[10px] font-bold text-neutral-600 uppercase text-right leading-tight">{label2}</div>
      <div className="col-span-9 flex items-center">
         <div className="h-4 bg-[#B91C1C] relative border border-neutral-900" style={{ width: `${val2}%` }}></div>
         <span className="ml-2 text-xs font-mono font-bold text-neutral-900">{val2}%</span>
      </div>
    </div>
  </div>
);

export default function EconomicReport() {
  const [activeTab, setActiveTab] = useState('part1');

  // Data from DESC_TABST.dta Analysis
  const wealthData = [
    { label: "Poorest", count: 1909, pct: 22 },
    { label: "Poorer", count: 1734, pct: 20 },
    { label: "Middle", count: 1552, pct: 18 },
    { label: "Richer", count: 1715, pct: 20 },
    { label: "Richest", count: 1706, pct: 20 },
  ];

  const regionStunting = [
    { region: "Sylhet", rate: 41.1, status: "Critical" },
    { region: "Mymensingh", rate: 35.6, status: "High" },
    { region: "Chittagong", rate: 32.1, status: "Moderate" },
    { region: "Barisal", rate: 31.5, status: "Moderate" },
    { region: "Rajshahi", rate: 29.3, status: "Moderate" },
    { region: "Rangpur", rate: 29.0, status: "Moderate" },
    { region: "Khulna", rate: 25.0, status: "Low" },
    { region: "Dhaka", rate: 24.8, status: "Low" },
  ];

  return (
    <div className="min-h-screen bg-[#FFF0E6] font-sans text-neutral-900 pb-16">
      
      {/* Brand Masthead */}
      <header className="bg-white border-b-4 border-neutral-900 pt-8 px-6 pb-4 mb-8">
        <div className="max-w-6xl mx-auto">
          <div className="flex justify-between items-end border-b-2 border-neutral-900 pb-4 mb-2">
            <div>
               <div className="text-[10px] font-bold uppercase tracking-[0.3em] text-[#B91C1C] mb-1">Market Analysis & Insight</div>
               <h1 className="text-4xl md:text-6xl font-serif font-black text-neutral-900 tracking-tighter leading-none">
                 The Socio-Economic Review
               </h1>
            </div>
            <div className="hidden md:block text-right">
               <div className="font-serif italic text-neutral-500">Since 2025</div>
               <div className="text-3xl font-black text-neutral-900">DEC</div>
            </div>
          </div>
          <div className="flex justify-between text-[10px] font-bold uppercase tracking-wider text-neutral-500 font-sans">
             <span>Vol. 4703 • Issue 01</span>
             <span>Dhaka Markets: <span className="text-green-700">OPEN</span></span>
             <span>Source: Primary Survey Data</span>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-6xl mx-auto px-6">
        
        {/* Navigation - Tab Bar */}
        <div className="flex mb-8 border-b-2 border-neutral-900">
          <button 
            onClick={() => setActiveTab('part1')}
            className={`px-6 py-3 font-bold text-sm uppercase tracking-wider transition-colors ${activeTab === 'part1' ? 'bg-[#B91C1C] text-white border-t-2 border-l-2 border-r-2 border-neutral-900 -mb-[2px]' : 'text-neutral-500 hover:text-neutral-900 hover:bg-white/50'}`}
          >
            I. Demographic Report
          </button>
          <button 
            onClick={() => setActiveTab('part2')}
            className={`px-6 py-3 font-bold text-sm uppercase tracking-wider transition-colors ${activeTab === 'part2' ? 'bg-[#B91C1C] text-white border-t-2 border-l-2 border-r-2 border-neutral-900 -mb-[2px]' : 'text-neutral-500 hover:text-neutral-900 hover:bg-white/50'}`}
          >
            II. Global Indices
          </button>
        </div>

        {activeTab === 'part1' && (
          <div className="animate-fade-in grid grid-cols-1 lg:grid-cols-12 gap-8">
            {/* Left Column - Main Story */}
            <div className="lg:col-span-8 space-y-8">
               <div>
                  <div className="flex items-center space-x-2 mb-3">
                    <span className="bg-[#B91C1C] text-white text-[10px] font-bold px-2 py-0.5 uppercase">Breaking Insight</span>
                    <span className="text-xs font-bold text-neutral-500 uppercase">Household Survey Analysis</span>
                  </div>
                  <h2 className="font-serif text-4xl font-bold text-neutral-900 mb-4 leading-tight">
                    Health Inequality Widens: Wealth Gap Drives 2.4x Stunting Disparity
                  </h2>
                  <div className="font-serif text-lg leading-relaxed text-neutral-800 columns-1 md:columns-2 gap-8 border-b border-neutral-300 pb-8 text-justify">
                    <p className="first-letter:text-5xl first-letter:font-black first-letter:float-left first-letter:mr-3 first-letter:mt-[-8px]">
                      New statistical evidence from the DESC_TABST dataset confirms a persistent correlation between economic stratification and child health outcomes. Despite widespread improvements in maternal education, the "stunting gap" remains a critical volatility factor in human capital development.
                    </p>
                    <p>
                      Analysts point to the stark contrast in regional performance, with Sylhet posting "Critical" risk levels (41.1%) compared to Dhaka's relative stability. The data suggests an urgent need for targeted fiscal intervention in low-performing divisions.
                    </p>
                  </div>
               </div>
               
               {/* Data Ticker Row */}
               <div className="grid grid-cols-3 gap-4">
                 <StatCard title="Child Age" value="29.5 mo" subtext="SD: ±17.5" icon={Baby} />
                 <StatCard title="Edu Index" value="63.4%" subtext="Secondary+" icon={BookOpen} trend="+1.2%" />
                 <StatCard title="Avg Height" value="151 cm" subtext="Maternal" icon={Activity} />
               </div>

               {/* Deep Dive Chart */}
               <div className="bg-white border border-neutral-300 p-6">
                 <h3 className="font-sans font-black text-neutral-900 uppercase tracking-widest text-sm mb-6 border-b-2 border-black pb-2 flex justify-between">
                    <span>Risk Analysis: Stunting</span>
                    <span className="text-[#B91C1C]">Volatile</span>
                 </h3>
                 <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                      <p className="font-serif text-sm text-neutral-600 mb-4 italic">
                        "The poorest quintile faces significantly higher headwinds in early childhood development."
                      </p>
                      <ComparisonBar 
                        title="Wealth Quintile Impact"
                        label1="Poorest" 
                        val1={41.1} 
                        label2="Richest" 
                        val2={17.2} 
                      />
                    </div>
                    <div>
                       <div className="overflow-x-auto">
                         <table className="w-full text-xs font-mono border-collapse">
                           <thead>
                             <tr className="border-b-2 border-black">
                               <th className="text-left py-2 uppercase">Region</th>
                               <th className="text-right py-2 uppercase">Rate</th>
                               <th className="text-right py-2 uppercase">Rating</th>
                             </tr>
                           </thead>
                           <tbody className="divide-y divide-neutral-200">
                             {regionStunting.slice(0, 5).map((r) => (
                               <tr key={r.region}>
                                 <td className="py-2 font-bold">{r.region}</td>
                                 <td className="py-2 text-right">{r.rate}%</td>
                                 <td className="py-2 text-right font-bold text-[#B91C1C]">{r.status}</td>
                               </tr>
                             ))}
                           </tbody>
                         </table>
                       </div>
                    </div>
                 </div>
               </div>
            </div>

            {/* Right Column - Market Sidebar */}
            <div className="lg:col-span-4 space-y-6">
               <Card className="p-4 bg-[#F5F5F5]">
                 <h3 className="font-sans font-black text-neutral-900 text-xs uppercase tracking-widest mb-4 border-b border-black pb-2">
                   Wealth Distribution
                 </h3>
                 <div className="space-y-3">
                   {wealthData.map((item) => (
                     <div key={item.label} className="flex justify-between items-center text-xs">
                       <span className="font-bold text-neutral-600 uppercase w-20">{item.label}</span>
                       <div className="flex-1 mx-2 h-2 bg-neutral-300">
                         <div className="h-full bg-neutral-800" style={{ width: `${(item.count / 2000) * 100}%` }}></div>
                       </div>
                       <span className="font-mono font-bold">{item.count}</span>
                     </div>
                   ))}
                 </div>
                 <div className="mt-4 p-2 bg-[#FFF0E6] border border-[#B91C1C] text-[10px] text-[#B91C1C] font-bold uppercase text-center">
                   Sample Balanced
                 </div>
               </Card>

               <div className="border-t-4 border-black pt-4">
                 <h4 className="font-serif font-bold text-xl mb-2">Editor's Note</h4>
                 <p className="font-serif text-sm text-neutral-700 leading-relaxed italic">
                   "The data indicates a classic development trap: low assets correlate with poor health, perpetuating the cycle. Education remains the sole bright spot in an otherwise bearish outlook for the lowest quintile."
                 </p>
                 <div className="mt-2 text-xs font-bold uppercase text-neutral-500">— Chief Economist</div>
               </div>
            </div>
          </div>
        )}

        {activeTab === 'part2' && (
          <div className="animate-fade-in">
             <div className="bg-neutral-900 text-[#FFF0E6] p-6 mb-8 border-b-4 border-[#B91C1C]">
                <div className="flex items-center gap-4">
                  <Globe className="w-12 h-12 text-[#B91C1C]" />
                  <div>
                    <h2 className="font-serif text-3xl font-bold">Global Markets Outlook</h2>
                    <p className="font-mono text-xs text-neutral-400 uppercase tracking-widest mt-1">
                      Ticker: LIFE_EXP • Volatility: LOW • Trend: BULLISH
                    </p>
                  </div>
                </div>
             </div>

             <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                {/* Market Segments */}
                <div className="md:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                   <div className="bg-white border border-neutral-300 p-4 relative group hover:border-[#B91C1C] transition-colors">
                      <div className="absolute top-2 right-2 text-neutral-300 font-mono text-xs group-hover:text-[#B91C1C]">LOW CAP</div>
                      <div className="text-[10px] font-bold text-neutral-500 uppercase tracking-widest mb-4">Under $1.5k GNP</div>
                      <div className="flex items-baseline gap-2">
                        <span className="text-4xl font-mono font-bold text-neutral-900">59.8</span>
                        <span className="text-xs font-bold text-neutral-500">Yrs</span>
                      </div>
                      <div className="mt-4 pt-3 border-t border-neutral-200 flex justify-between items-center">
                        <span className="text-xs font-bold uppercase text-neutral-500">Growth Rate</span>
                        <span className="text-sm font-mono font-bold text-[#B91C1C]">2.4% ▲</span>
                      </div>
                   </div>

                   <div className="bg-white border-2 border-black p-4 relative shadow-lg transform md:-translate-y-2">
                      <div className="absolute -top-3 left-1/2 -translate-x-1/2 bg-[#B91C1C] text-white px-3 py-0.5 text-[10px] font-bold uppercase tracking-widest">Growth Sector</div>
                      <div className="text-[10px] font-bold text-neutral-500 uppercase tracking-widest mb-4 mt-2">Mid Cap ($1.5k-5k)</div>
                      <div className="flex items-baseline gap-2">
                        <span className="text-5xl font-mono font-bold text-neutral-900">71.2</span>
                        <span className="text-xs font-bold text-neutral-500">Yrs</span>
                      </div>
                      <div className="mt-4 pt-3 border-t border-neutral-200 flex justify-between items-center">
                        <span className="text-xs font-bold uppercase text-neutral-500">Growth Rate</span>
                        <span className="text-sm font-mono font-bold text-neutral-800">1.5% ▲</span>
                      </div>
                   </div>

                   <div className="bg-white border border-neutral-300 p-4 relative group hover:border-green-700 transition-colors">
                      <div className="absolute top-2 right-2 text-neutral-300 font-mono text-xs group-hover:text-green-700">BLUE CHIP</div>
                      <div className="text-[10px] font-bold text-neutral-500 uppercase tracking-widest mb-4">Large Cap ($5k+)</div>
                      <div className="flex items-baseline gap-2">
                        <span className="text-4xl font-mono font-bold text-neutral-900">77.5</span>
                        <span className="text-xs font-bold text-neutral-500">Yrs</span>
                      </div>
                      <div className="mt-4 pt-3 border-t border-neutral-200 flex justify-between items-center">
                        <span className="text-xs font-bold uppercase text-neutral-500">Growth Rate</span>
                        <span className="text-sm font-mono font-bold text-green-700">0.6% ▼</span>
                      </div>
                   </div>
                </div>

                {/* Analysis Columns */}
                <div className="md:col-span-2 pr-4">
                   <h3 className="font-serif text-2xl font-bold text-neutral-900 mb-3 border-b-2 border-black pb-2">
                     The Wealth-Longevity Correlation
                   </h3>
                   <div className="font-serif text-neutral-800 text-justify space-y-4">
                     <p>
                       <span className="font-bold">DHAKA</span> — Market data indicates a strong "buy" signal for human capital investment. Transitioning from low-income to mid-income status yields a massive <span className="font-bold bg-[#B91C1C] text-white px-1">19% yield</span> in life expectancy.
                     </p>
                     <p>
                       However, the "Growth Rate" indicator suggests a demographic cooling. As economies mature ({'>'}$5k GNP), population expansion slows to <span className="font-mono">0.6%</span>, signaling a shift towards stable, high-value labor markets.
                     </p>
                   </div>
                </div>

                {/* Sidebar */}
                <div className="md:col-span-1 bg-white border border-neutral-300 p-4">
                   <div className="flex items-center gap-2 mb-4 border-b border-neutral-200 pb-2">
                     <LineChart size={16} />
                     <h4 className="font-sans font-bold text-xs uppercase tracking-widest">Market Outliers</h4>
                   </div>
                   <ul className="space-y-3 text-xs font-mono">
                     {["Haiti", "Brazil", "Turkey", "Turkmenistan", "Mongolia"].map((c, i) => (
                       <li key={c} className="flex justify-between items-center group cursor-pointer">
                         <span className="group-hover:text-[#B91C1C] transition-colors font-bold">{c}</span>
                         <span className={`px-1.5 py-0.5 text-[10px] font-bold ${i % 2 === 0 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                           {i % 2 === 0 ? '+VOL' : '-YIELD'}
                         </span>
                       </li>
                     ))}
                   </ul>
                   <div className="mt-6 border-t border-black pt-2">
                      <p className="font-serif text-[10px] italic text-neutral-500">
                        *Outliers defined by high growth ({'>'}1%) vs sub-optimal health metrics.
                      </p>
                   </div>
                </div>

             </div>
          </div>
        )}
      </main>

      {/* Footer */}
      <footer className="mt-16 bg-neutral-900 text-[#FFF0E6] py-8 text-center border-t-4 border-[#B91C1C]">
        <div className="max-w-4xl mx-auto px-6">
          <p className="font-mono text-xs uppercase tracking-widest mb-2">
            The Economics Times • Dhaka Edition
          </p>
          <p className="font-serif text-[10px] text-neutral-500">
            Copyright © 2025 ECON-4703 Holdings. All data derived from DESC_TABST and LifeExp indices.
          </p>
        </div>
      </footer>
    </div>
  );
}
